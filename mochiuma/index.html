<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ANEKAMARKET - Platform jual beli online terpercaya untuk semua kebutuhan Anda. Dekorasi, handmade, dan souvenir berkualitas.">
    <meta name="keywords" content="jual beli online, situbondo, dekorasi, handmade, souvenir, mochi uma, kue, snack">
    <meta name="author" content="ANEKAMARKET">
    <meta property="og:title" content="ANEKAMARKET | Platform Jual Beli Online Terpercaya">
    <meta property="og:description" content="Semua Bisa Jualan & Semua Bisa Pesan - Platform lengkap untuk kebutuhan jual beli online Anda">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://s.id/anekamarket">
    <meta property="og:image" content="https://raw.githubusercontent.com/LKS-88/anekamarket/refs/heads/main/Logo-Anekamarketku.png">
    <title>MOCHI UMA MITRA ANEKAMARKET | Platform Jual Beli Online Terpercaya</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" href="https://raw.githubusercontent.com/LKS-88/anekamarket/refs/heads/main/Logo-Anekamarketku.png" type="image/png">
    
    <style>
        /* --- VARIABEL & RESET DASAR --- */
        :root {
            --primary: #007bff; --secondary: #6c757d; --success: #28a745;
            --danger: #dc3545; --light: #f8f9fa; --dark: #343a40;
            --white: #ffffff; --text-dark: #212529; --text-light: #6c757d;
            --font-primary: 'Poppins', sans-serif; --font-secondary: 'Playfair Display', serif;
            --shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-primary); background-color: #f4f7f6;
            color: var(--text-dark); line-height: 1.6;
        }
        .container { max-width: 1200px; margin: auto; padding: 0 20px; }
        section { padding: 60px 0; }
        .section-title {
            text-align: center; margin-bottom: 40px; font-family: var(--font-secondary);
            font-size: 2.5rem; color: var(--dark);
        }

        /* --- HEADER --- */
        header#home {
            position: relative; height: 100vh; color: var(--white);
            display: flex; align-items: center; justify-content: center; text-align: center;
            background: url('https://i.imgur.com/TPSWsZw.jpeg') no-repeat center center/cover;
        }
        .header-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); }
        .header-content { position: relative; z-index: 2; padding: 20px; }
        .logo { display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; }
        .logo img { width: 80px; height: auto; margin-right: 15px; }
        .logo span { font-size: 2.5rem; font-weight: 700; font-family: var(--font-secondary); }
        .tagline { font-size: 1.2rem; margin-bottom: 2rem; }
        .header-search { margin-bottom: 2rem; display: flex; justify-content: center; }
        .header-search input {
            width: 70%; max-width: 400px; padding: 12px 20px; border: none;
            border-radius: 25px 0 0 25px; font-size: 1rem;
        }
        .header-search button {
            padding: 12px 20px; border: none; background-color: var(--primary);
            color: var(--white); border-radius: 0 25px 25px 0; cursor: pointer; font-size: 1rem;
        }
        .btn {
            padding: 12px 25px; border-radius: 25px; text-decoration: none;
            font-weight: 600; margin: 5px; transition: all 0.3s ease; border: none; cursor: pointer;
        }
        .btn-primary { background-color: var(--primary); color: var(--white); }
        .btn-primary:hover { background-color: #0056b3; transform: translateY(-2px); }
        .btn-outline { border: 2px solid var(--white); color: var(--white); background: transparent; }
        .btn-outline:hover { background-color: var(--white); color: var(--dark); transform: translateY(-2px); }

        /* --- NAVBAR --- */
        nav#navbar {
            position: sticky; top: 0; width: 100%; z-index: 1000;
            background-color: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.1); padding: 10px 0;
        }
        .nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: auto; padding: 0 20px; }
        .nav-logo { display: flex; align-items: center; text-decoration: none; color: var(--dark); font-weight: 700; font-size: 1.2rem; }
        .nav-logo img { width: 40px; height: auto; margin-right: 10px; }
        .nav-links { display: flex; }
        .nav-links a { color: var(--text-dark); text-decoration: none; margin: 0 15px; font-weight: 500; transition: color 0.3s; }
        .nav-links a:hover { color: var(--primary); }
        .mobile-menu-toggle, .search-toggle { display: none; font-size: 1.5rem; background: none; border: none; cursor: pointer; color: var(--dark); }

        /* --- GALERI --- */
        .gallery-intro { text-align: center; margin-bottom: 30px; }
        .product-categories { margin-top: 20px; display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; }
        .product-category-btn {
            background: #e9ecef; border: none; padding: 10px 20px; border-radius: 20px;
            cursor: pointer; font-weight: 500; transition: all 0.3s;
        }
        .product-category-btn.active, .product-category-btn:hover { background: var(--primary); color: var(--white); }
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .gallery-item {
            background: var(--white); border-radius: 10px; box-shadow: var(--shadow);
            overflow: hidden; display: flex; flex-direction: column;
        }
        .gallery-image-container { width: 100%; padding-top: 75%; position: relative; }
        .gallery-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s; }
        .gallery-item:hover .gallery-image { transform: scale(1.05); }
        .gallery-details { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .gallery-title { font-family: var(--font-secondary); font-size: 1.3rem; margin-bottom: 10px; }
        .gallery-price { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-bottom: 15px; }
        .gallery-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: auto; }
        .gallery-actions button {
            width: 100%; padding: 12px; border: none; border-radius: 5px; cursor: pointer;
            font-weight: 600; transition: background-color 0.3s;
        }
        .gallery-actions .btn-order { background-color: var(--primary); color: white; }
        .gallery-actions .btn-detail { background-color: var(--secondary); color: white; }
        .gallery-detail-expanded {
            display: none; margin-top: 20px; font-size: 0.9rem;
            border-top: 1px solid #eee; padding-top: 15px;
        }
        .spec-item { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #f0f0f0; }
        .spec-label { font-weight: 600; }
        .spec-value { text-align: right; }


        /* --- FOOTER & TOMBOL MELAYANG --- */
        .contact-bar { position: fixed; bottom: 20px; right: 20px; z-index: 1001; display: flex; flex-direction: column; gap: 10px; }
        .contact-btn {
            width: 50px; height: 50px; border-radius: 50%; border: none; color: white;
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); text-decoration: none; transition: transform 0.3s;
        }
        .contact-btn:hover { transform: scale(1.1); }
        .contact-btn.music { background-color: var(--secondary); }
        .contact-btn.whatsapp { background-color: #25D366; }
        .contact-btn.order { background-color: var(--primary); }
        footer { background-color: var(--dark); color: var(--light); padding: 40px 0 20px 0; }
        .footer-container { display: flex; justify-content: space-between; flex-wrap: wrap; max-width: 1200px; margin: auto; padding: 0 20px; }
        .footer-col { flex: 1; min-width: 250px; margin: 20px; }
        .footer-logo { display: flex; align-items: center; margin-bottom: 15px; }
        .footer-logo img { width: 50px; margin-right: 10px; }
        .footer-logo span { font-size: 1.5rem; font-weight: 700; }
        .footer-links { list-style: none; }
        .footer-links a { color: var(--light); text-decoration: none; display: block; padding: 5px 0; }
        .newsletter-form { display: flex; margin-top: 10px; }
        .newsletter-form input { flex-grow: 1; padding: 10px; border: none; border-radius: 5px 0 0 5px; }
        .newsletter-form button { border-radius: 0 5px 5px 0; padding: 10px 15px; }
        .copyright { text-align: center; margin-top: 30px; border-top: 1px solid #4a4a4a; padding-top: 20px; font-size: 0.9rem; }

        /* --- MODAL --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7);
            z-index: 2000; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s;
        }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content {
            width: 90%; max-width: 500px; background: #fff; border-radius: 8px;
            padding: 30px; position: relative; transform: scale(0.9); transition: transform 0.3s;
        }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .close-modal {
            position: absolute; top: 10px; right: 20px; font-size: 2.5rem; cursor: pointer;
            background: none; border: none; color: #888;
        }
        .search-modal-content { max-width: 600px; }
        .search-modal-input { width: 100%; padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 5px; margin-bottom: 15px; }
        .search-results { max-height: 400px; overflow-y: auto; }
        .search-result-item { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #eee; text-decoration: none; color: #333; }
        .search-result-item:hover { background-color: #f5f5f5; }
        .search-result-image { width: 60px; height: 60px; object-fit: cover; border-radius: 5px; margin-right: 15px; }
        #orderModal form { display: flex; flex-direction: column; gap: 15px; }
        #orderModal input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; }

        /* --- NOTIFIKASI PENAWARAN --- */
        .offer-notification {
            position: fixed; bottom: 20px; left: 20px; background-color: #ffffff; padding: 20px;
            border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); width: 320px; z-index: 1001;
            transform: translateY(200%); opacity: 0; transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
        }
        .offer-notification.show { transform: translateY(0); opacity: 1; }
        .offer-notification .notification-content { display: none; }
        .offer-notification .notification-content.active { display: block; }
        .offer-notification .notification-buttons { display: flex; gap: 10px; margin-top: 15px; }
        .offer-notification .notification-btn { flex: 1; padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; }
        .offer-notification .btn-yes { background-color: var(--primary); color: white; }
        .offer-notification .btn-no { background-color: #f1f1f1; border: 1px solid #ddd; }
        .close-notification { position: absolute; top: 10px; right: 15px; font-size: 20px; color: #888; cursor: pointer; background: none; border: none; }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .nav-links {
                display: none; flex-direction: column; position: absolute; top: 60px;
                left: 0; width: 100%; background-color: var(--white); box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            }
            .nav-links.active { display: flex; }
            .nav-links a { padding: 15px; text-align: center; border-bottom: 1px solid #f0f0f0; }
            .mobile-menu-toggle, .search-toggle { display: block; }
            .logo span { font-size: 1.5rem; }
            .header-buttons { display: flex; flex-direction: column; }
            .header-buttons .btn { margin: 10px 0; }
            .footer-container { text-align: center; }
            .offer-notification { width: calc(100% - 40px); left: 20px; }
        }
    </style>
</head>
<body>
    <audio id="bgMusic" loop>
        <source src="https://raw.githubusercontent.com/LenteraKarya/Lentera-Karya/main/assets/audio/audiotombol.mp3" type="audio/mpeg">
    </audio>
    <audio id="buttonSound" src="https://raw.githubusercontent.com/LenteraKarya/Lentera-Karya/main/assets/audio/audiotombol.mp3"></audio>
    
    <header id="home">
        <div class="header-overlay"></div>
        <div class="header-content">
            <div class="logo">
                <img src="https://raw.githubusercontent.com/LKS-88/anekamarket/refs/heads/main/Logo-Anekamarketku.png" alt="ANEKAMARKET Logo">
                <span>MOCHI UMA MITRA ANEKAMARKET</span>
            </div>
            <p class="tagline">Semua Bisa Jualan & Semua Bisa Pesan</p>
            <div class="header-search">
                <input type="text" id="headerSearchInput" placeholder="Cari produk, UMKM, kode...">
                <button id="headerSearchBtn" aria-label="Cari"><i class="fas fa-search"></i></button>
            </div>
            <div class="header-buttons">
                <a href="#gallery" class="btn btn-primary"><i class="fas fa-images"></i> Lihat Produk Kami</a>
            </div>
        </div>
    </header>
    
    <nav id="navbar">
        <div class="nav-container">
            <a href="#home" class="nav-logo">
                <img src="https://raw.githubusercontent.com/LKS-88/anekamarket/refs/heads/main/Logo-Anekamarketku.png" alt="ANEKAMARKET Logo">
                <span>ANEKAMARKET</span>
            </a>
            <button class="search-toggle" id="searchToggle" aria-label="Buka Pencarian">
                <i class="fas fa-search"></i>
            </button>
            <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Buka Menu">
                <i class="fas fa-bars"></i>
            </button>
            <div class="nav-links" id="navLinks">
                <a href="#home">Beranda</a>
                <a href="#gallery">Galeri</a>
            </div>
        </div>
    </nav>
    
    <main class="container">
        <section class="gallery" id="gallery">
            <h2 class="section-title">Galeri Kami</h2>
            <div class="gallery-intro">
                <p>Jelajahi koleksi karya dan layanan premium kami. Klik "Detail" untuk melihat informasi lebih lanjut.</p>
                <div class="product-categories">
                    <button class="product-category-btn active" data-category="all">Semua</button>
                    <button class="product-category-btn" data-category="snack">Kue & Cemilan</button>
                    <button class="product-category-btn" data-category="food">Makanan</button>
                </div>
            </div>
            <div class="gallery-grid" id="gallery-grid">
                </div>   
        </section>
    </main>
    
    <div class="contact-bar">
        <button id="musicToggleBtn" class="contact-btn music" aria-label="Putar Musik"><i class="fas fa-play"></i></button>
        <a href="https://wa.me/6289679013099" class="contact-btn whatsapp" target="_blank" aria-label="Hubungi WhatsApp"><i class="fab fa-whatsapp"></i></a>
        <button class="contact-btn order" id="quickOrderBtn" aria-label="Pesan Cepat"><i class="fas fa-shopping-cart"></i></button>
    </div>
    
    <footer>
        <div class="footer-container">
            <div class="footer-col footer-about">
                <div class="footer-logo">
                    <img src="https://raw.githubusercontent.com/LKS-88/anekamarket/refs/heads/main/Logo-Anekamarketku.png" alt="ANEKAMARKET Logo">
                    <span>ANEKAMARKET</span>
                </div>
                <p>Menyediakan pelayanan publikasi dan promosi produk UMKM sejak tahun 2025.</p>
            </div>
            <div class="footer-col">
                <h3>Tautan Cepat</h3>
                <ul class="footer-links">
                    <li><a href="#home">Beranda</a></li>
                    <li><a href="#gallery">Galeri</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h3>Newsletter</h3>
                <p>Dapatkan update & penawaran spesial.</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Alamat email Anda" required>
                    <button type="submit" class="btn btn-primary" aria-label="Berlangganan"><i class="fas fa-envelope"></i></button>
                </form>
            </div>
        </div>
        <div class="copyright">&copy; 2025 ANEKAMARKET. Semua hak dilindungi.</div>
    </footer>
    
    <div class="modal-overlay" id="orderModal">
        <div class="modal-content">
            <button class="close-modal" aria-label="Tutup">&times;</button>
            <h2>Pesan Cepat via WhatsApp</h2>
            <form id="quickOrderForm">
                <input type="text" name="name" placeholder="Nama Anda" required>
                <input type="tel" name="phone" placeholder="Nomor WhatsApp Anda" required>
                <input type="text" name="product" placeholder="Produk yang Diminati (Contoh: Mochi)" required>
                <button type="submit" class="btn btn-primary"><i class="fab fa-whatsapp"></i> Kirim ke Admin</button>
            </form>
        </div>
    </div>
    
    <div class="modal-overlay" id="searchModal">
        <div class="modal-content search-modal-content">
            <button class="close-modal" aria-label="Tutup">&times;</button>
            <input type="text" class="search-modal-input" placeholder="Cari produk, UMKM, kode..." id="searchModalInput">
            <div class="search-results" id="searchResults">
                <p class="search-results-placeholder">Mulai ketik untuk mencari produk...</p>
            </div>
        </div>
    </div>

    <div class="offer-notification" id="offerNotification">
        <button class="close-notification" id="closeNotification" aria-label="Tutup Notifikasi">&times;</button>
        <div class="notification-content active" id="notificationStep1">
            <h4>Punya bisnis atau usaha? 🚀 Ingin menjangkau lebih banyak pelanggan?</h4>
            <div class="notification-buttons">
                <button class="notification-btn btn-no" data-action="close">Tidak</button>
                <button class="notification-btn btn-yes" data-action="next">Iya, Tentu</button>
            </div>
        </div>
        <div class="notification-content" id="notificationStep2">
            <h4>Tertarik mendaftarkan usaha Anda di Anekamarket secara GRATIS?</h4>
            <div class="notification-buttons">
                <button class="notification-btn btn-no" data-action="close">Lain Kali</button>
                <button class="notification-btn btn-yes" data-action="register">Iya, Saya Mau</button>
            </div>
        </div>
    </div>
    
    <script>
        // --- DATA PRODUK ---
        const products = [
            {
                id: "MCU-2025-2830",
                category: "snack",
                type: "promo",
                seller: {
                    name: "Mochi UMA",
                    link: "https://anekamarket.my.id"
                },
                badge: {
                    text: "Promo Spesial",
                    type: "promo"
                },
                mainImage: "https://i.imgur.com/TPSWsZw.jpeg",
                title: "Promo Aneka Kue Lezat Mochi Uma",
                code: "MCU-2025-2830",
                price: 10000,
                originalPrice: null,
                discount: null,
                priceVariations: [
                    { name: "Pancake Durian", price: 10000 },
                    { name: "Mochi (3pcs)", price: 10000 },
                    { name: "Cireng Ayam Suwir", price: 10000 },
                    { name: "Corndog Coklat (isi 3)", price: 10000 }
                ],
                units: ["pcs", "pack", "set", "lusin"],
                defaultUnit: "pcs",
                details: {
                    description: "<strong>PROMO SPESIAL!</strong> Mochi UMA menghadirkan paket promo aneka kue lezat dengan harga spesial. Nikmati berbagai pilihan kue premium dengan diskon menarik untuk waktu terbatas. Setiap produk dibuat dengan bahan pilihan dan teknik khusus untuk menjamin cita rasa autentik. Jangan lewatkan kesempatan ini untuk menikmati kue berkualitas dengan harga terjangkau!",
                    images: [
                        "https://i.imgur.com/dlK9kfP.jpeg",
                        "https://i.imgur.com/JsXOHCO.jpeg",
                        "https://i.imgur.com/kJDDUy4.jpeg"
                    ],
                    specs: [
                        { label: "Kode Promo", value: "MCU-2025-2830" },
                        { label: "Nama UMKM", value: "Mochi UMA" },
                        { label: "Pemilik", value: "ULink" },
                        { label: "Alamat", value: "Jl. Wijaya Kusuma Samping Bidan Ika" },
                        { label: "Kontak", value: "089679013099 | nurilaneeh@gmail.com" },
                        { label: "Media Sosial", value: "TikTok @mochi.uma3" },
                        { label: "Daftar Promo", value: "• Pancake Durian hanya Rp10.000<br>• Mochi 3pcs Rp10.000<br>• Cireng Ayam Suwir Rp10.000<br>• Corndog Coklat isi 3 Rp10.000" },
                        { label: "Periode Promo", value: "Sampai 31 Agustus 2025" },
                        { label: "Catatan", value: "Harga bisa berubah sewaktu-waktu" }
                    ]
                },
                contact: {
                    whatsapp: "6289679013099",
                    phone: "+6289679013099"
                }
            }
        ];

        // --- SCRIPT UTAMA APLIKASI ---
        document.addEventListener('DOMContentLoaded', () => {

            // --- PEMILIH ELEMEN DOM ---
            const galleryGrid = document.getElementById('gallery-grid');
            const body = document.body;
            const searchModal = document.getElementById('searchModal');
            const orderModal = document.getElementById('orderModal');
            const searchModalInput = document.getElementById('searchModalInput');
            const headerSearchInput = document.getElementById('headerSearchInput');
            const searchResultsContainer = document.getElementById('searchResults');
            const offerNotification = document.getElementById('offerNotification');
            const quickOrderForm = document.getElementById('quickOrderForm');
            const bgMusic = document.getElementById('bgMusic');
            const musicToggleBtn = document.getElementById('musicToggleBtn');
            
            // --- FUNGSI UTILITAS ---
            const formatPrice = (amount) => new Intl.NumberFormat('id-ID', {
                style: 'currency', currency: 'IDR', minimumFractionDigits: 0
            }).format(amount);

            // --- RENDER PRODUK ---
            function renderProducts(filter = 'all') {
                if (!galleryGrid || typeof products === 'undefined') return;

                galleryGrid.innerHTML = '';
                const filteredProducts = products.filter(p => filter === 'all' || p.category === filter);

                if (filteredProducts.length === 0) {
                    galleryGrid.innerHTML = '<p>Tidak ada produk dalam kategori ini.</p>';
                    return;
                }

                filteredProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'gallery-item';
                    productCard.id = `product-${product.id}`;
                    productCard.dataset.id = product.id;

                    const detailSpecsHTML = product.details.specs.map(spec => `
                        <div class="spec-item">
                            <span class="spec-label">${spec.label}</span>
                            <span class="spec-value">${spec.value}</span>
                        </div>
                    `).join('');

                    productCard.innerHTML = `
                        <div class="gallery-image-container">
                            <img src="${product.mainImage}" alt="${product.title}" class="gallery-image" loading="lazy">
                        </div>
                        <div class="gallery-details">
                            <h3 class="gallery-title">${product.title}</h3>
                            <p class="gallery-price">${formatPrice(product.price)}</p>
                            <div class="gallery-actions">
                                <button class="btn-detail" aria-expanded="false"><i class="fas fa-info-circle"></i> Detail</button>
                                <button class="btn-order"><i class="fab fa-whatsapp"></i> Pesan</button>
                            </div>
                            <div class="gallery-detail-expanded">
                                <div>${product.details.description}</div>
                                <div class="gallery-specs" style="margin-top:15px;">${detailSpecsHTML}</div>
                            </div>
                        </div>
                    `;
                    galleryGrid.appendChild(productCard);
                });
            }

            // --- FUNGSI MODAL ---
            function openModal(modal) {
                if (modal) {
                    modal.classList.add('show');
                    body.style.overflow = 'hidden';
                }
            }

            function closeModal(modal) {
                if (modal) {
                    modal.classList.remove('show');
                    body.style.overflow = 'auto';
                }
            }
            
            // --- FUNGSI PENCARIAN ---
            function performSearch(query) {
                if (query.length < 2) {
                    searchResultsContainer.innerHTML = '<p class="search-results-placeholder">Ketik minimal 2 huruf...</p>';
                    return;
                }
                
                const results = products.filter(p => 
                    p.title.toLowerCase().includes(query) ||
                    p.code.toLowerCase().includes(query) ||
                    p.seller.name.toLowerCase().includes(query)
                );

                searchResultsContainer.innerHTML = '';
                if (results.length > 0) {
                    results.forEach(product => {
                        const item = document.createElement('a');
                        item.href = `#product-${product.id}`;
                        item.className = 'search-result-item';
                        item.innerHTML = `
                            <img src="${product.mainImage}" alt="${product.title}" class="search-result-image">
                            <div><h4>${product.title}</h4><p>${product.seller.name} - ${formatPrice(product.price)}</p></div>`;
                        item.addEventListener('click', () => closeModal(searchModal));
                        searchResultsContainer.appendChild(item);
                    });
                } else {
                    searchResultsContainer.innerHTML = '<p class="search-results-placeholder">Produk tidak ditemukan.</p>';
                }
            }

            // --- EVENT LISTENERS ---
            
            // Pencarian
            [searchModalInput, headerSearchInput].forEach(input => {
                input.addEventListener('keyup', (e) => {
                    const query = e.target.value.toLowerCase();
                    if(e.key === 'Enter' || query.length >= 2) {
                        openModal(searchModal);
                        performSearch(query);
                    }
                });
            });
            document.getElementById('headerSearchBtn').addEventListener('click', () => {
                openModal(searchModal);
                performSearch(headerSearchInput.value.toLowerCase());
            });
            
            // Aksi di Galeri (Detail & Pesan)
            galleryGrid.addEventListener('click', e => {
                const productCard = e.target.closest('.gallery-item');
                if (!productCard) return;

                const productId = productCard.dataset.id;
                const productData = products.find(p => p.id === productId);

                if (e.target.closest('.btn-detail')) {
                    const detailButton = e.target.closest('.btn-detail');
                    const detailContent = productCard.querySelector('.gallery-detail-expanded');
                    const isExpanded = detailButton.getAttribute('aria-expanded') === 'true';
                    detailContent.style.display = isExpanded ? 'none' : 'block';
                    detailButton.setAttribute('aria-expanded', !isExpanded);
                    detailButton.innerHTML = isExpanded ? '<i class="fas fa-info-circle"></i> Detail' : '<i class="fas fa-chevron-up"></i> Sembunyikan';
                }

                if (e.target.closest('.btn-order')) {
                    const message = `Halo, saya tertarik dengan produk:\n*${productData.title}* (${productData.code})\nMohon informasinya. Terima kasih.`;
                    window.open(`https://wa.me/${productData.contact.whatsapp}?text=${encodeURIComponent(message)}`, '_blank');
                }
            });

            // Filter Kategori
            document.querySelector('.product-categories').addEventListener('click', e => {
                if (e.target.tagName === 'BUTTON') {
                    document.querySelectorAll('.product-category-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    renderProducts(e.target.dataset.category);
                }
            });

            // Kontrol Modal
            document.addEventListener('click', e => {
                if (e.target.matches('.close-modal') || e.target.matches('.modal-overlay')) {
                    closeModal(e.target.closest('.modal-overlay'));
                }
                if (e.target.matches('#searchToggle') || e.target.closest('#searchToggle')) {
                    openModal(searchModal);
                    searchModalInput.focus();
                }
                if (e.target.matches('#quickOrderBtn') || e.target.closest('#quickOrderBtn')) {
                    openModal(orderModal);
                }
            });
            
            // Notifikasi Penawaran
            setTimeout(() => offerNotification.classList.add('show'), 5000);
            offerNotification.addEventListener('click', e => {
                const action = e.target.dataset.action;
                if (action === 'close') offerNotification.classList.remove('show');
                else if (action === 'next') {
                    document.getElementById('notificationStep1').classList.remove('active');
                    document.getElementById('notificationStep2').classList.add('active');
                } else if (action === 'register') {
                    window.open('https://wa.me/6289679013099?text=Halo, saya tertarik mendaftarkan usaha di Anekamarket.', '_blank');
                    offerNotification.classList.remove('show');
                }
            });
            document.getElementById('closeNotification').addEventListener('click', () => offerNotification.classList.remove('show'));

            // Form Pesan Cepat
            quickOrderForm.addEventListener('submit', e => {
                e.preventDefault();
                const formData = new FormData(quickOrderForm);
                const name = formData.get('name');
                const product = formData.get('product');
                const fullMessage = `Halo, nama saya ${name}. Saya ingin memesan *${product}*. Mohon info ketersediaannya.`;
                window.open(`https://wa.me/6289679013099?text=${encodeURIComponent(fullMessage)}`, '_blank');
                closeModal(orderModal);
            });
            
            // Kontrol Musik
            musicToggleBtn.addEventListener('click', () => {
                if (bgMusic.paused) {
                    bgMusic.play();
                    musicToggleBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    bgMusic.pause();
                    musicToggleBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            });

            // Navigasi Mobile
            document.getElementById('mobileMenuToggle').addEventListener('click', () => {
                document.getElementById('navLinks').classList.toggle('active');
            });

            // --- INISIALISASI ---
            renderProducts();
        });
    </script>
</body>
</html>
